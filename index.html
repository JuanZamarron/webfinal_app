<!DOCTYPE html>
<html>
<head>
  <title></title>
  <link rel="stylesheet" type="text/css" href="css/styles2.css">
  <link rel="stylesheet" type="text/css" href="css/styles-sidebar.css">
  <link rel="stylesheet" type="text/css" href="css/styles-topnav.css">
  <link rel="stylesheet" type="text/css" href="css/styles-popup.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css">

</head>
<body>
  <div class="topnav menu" id='topnav' style=" top: 0px; position: fixed;" >
        <a title="Perfil" class=" fa fa-bars menu-left" onclick="openNav()" > </a>
        <a title="Algo" class="menu-left" href='index.html' >Eventos Disponibles</a>
        <a title="Algo" class="menu-left" href='crear-evento.html' >Crear Evento</a>
        <a title="Home" class=" fa fa-home menu-right" ></a>
  </div>

  <div id="mySidenav" class="sidenav">
    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
    <a href="#">About</a>
    <a href="#">Services</a>
    <a href="#">Clients</a>
    <a href="#">Contact</a>
  </div>

  <br>
  <br>
  <br>
  <br>
  <div>
    <h1>Eventos Disponibles</h1>
  </div>

  <section>
      <li>
        <div id="evento1" class="evento" >
          <div class="cosas-izquierda" >
            <div class="div-cosas" >
              <a>Evento1</a>
            </div>
            <div class="div-cosas" >
              <a>Algo abajo</a>
            </div>
            <div class="div-cosa-verde" >
                <a class="redondo">Tipo Evento</a>
              </div>
          </div>
          
          <div class="cosas-derecha" >
              <div class="div-cosas" >
                  <a >Fecha</a>
                </div>
                <div class="div-cosas" >
                  <a>HoraInicio HoraFinal</a>
                </div>
                <div class="div-cosa-verde" >
                    <a id="registro-evento-1" class="redondo-registro"> Registrarme <i class="down"></i></a>
                </div>
          </div>
          <div class="cosas-enmedio" >
              <div>
                <a>Descripcion evento </a>
              </div>
            </div>
          <div class="cosas-enmedio" >
            <div>
              <a>algo</a>
            </div>
            
          </div>
        </div>
        
        <div id='box-registro-1' class="box-registro hidden">
          <div>
            <div>
              <a >Servicios disponibles</a>
              
              <div class="div-costos" >
                <div>
                  <a>Costo por Boleto:</a>
                </div>
                <div>
                  <a id='textocostototalevento1' >1000</a>
                </div>
                <div>
                    <a>Numero de Boletos</a>
                </div>
                <div>
                    <div class="circle" style="float: left" onclick="bajarBoletos(this)" >
                      <div class="horizontal" style="float: left"></div>
                    </div>
                    <div class="circle" style="float: right" onclick="subirBoletos(this)" >
                      <div class="horizontal" style="float: right"></div>
                      <div class="vertical" style="float: right"></div>
                    </div>
                    <div class="numero-boletos" >
                      <a id='numerodeboletosevento1' >1</a>
                    </div>
                  </div>
                  <div>
                      <a>Costo Total:</a>
                  </div>
                  <div>
                      <a id="costototalboletosevento1" >100</a>
                  </div>
                  <div class="div-cosa-verde" >
                    <a id="btn-abrir-popup" class="redondo-registro"  onclick="abrirConfirmacionDeCompra(this)"> Comprar Boleto(s)</a>
                </div>
                  
              </div>
              <div class="div-servicios" >
                  <div id="servicio1evento1" class="redondo-servicio-not-selected"  onclick="seleccionDeServicios(this)" data-costo="100" >
                    <a >Servicio 1 - $100</a>
                  </div>
                  <div id="servicio2evento1" class="redondo-servicio-not-selected" onclick="seleccionDeServicios(this)" data-costo="200">
                    <a  >Servicio 2 - $200</a>
                  </div>
                  <div id="servicio3evento1" class="redondo-servicio-not-selected" onclick="seleccionDeServicios(this)" data-costo="300" >
                    <a  >Servicio 3 - $300 </a>
                  </div>
                </div>
            </div>
          </div>
        </div>
      </li>


      <li>
          <div class="evento" >
            <div class="cosas-izquierda" >
              <div >
                <a>Evento2</a>
              </div>
              <div  >
                <a>Algo abajo</a>
              </div>
              <div>
                  <a class="redondo">Tipo Evento</a>
                </div>
            </div>
            <div class="cosas-enmedio" >
              <div>
                <a>Descripcion evento </a>
              </div>
            </div>
            <div class="cosas-derecha" >
                <div >
                    <a >Fecha</a>
                  </div>
                  <div>
                    <a>HoraInicio HoraFinal</a>
                  </div>
            </div>
          </div>
        </li>

  </section>

  <div class="overlay" id="overlay">
    <div class="popup" id="popup">
      <a id="btn-cerrar-popup" class="btn-cerrar-popup" onclick="confirmarCompra(this)"><i class="fas fa-times"></i></a>
      <h3>CONFIRMAR COMPRA</h3>
      <h4 id='h4-costo-total-popup'>Costo total [monto del costo]</h4>
      <div class="div-cosa-verde" >
        <a id="btn-cerrar-popup" class="redondo-registro" onclick="confirmarCompra(this)"> CONFIRMAR</a>
    </div>
    </div>
  </div>
  
  <script
  src="https://code.jquery.com/jquery-3.4.1.js"
  integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
  crossorigin="anonymous"></script>
  <script>
    function openNav() {
      document.getElementById("mySidenav").style.width = "250px";
    }
    
    function closeNav() {
      document.getElementById("mySidenav").style.width = "0";
    }

    //box de registro para registrase a un evento
    $('#registro-evento-1').on('click',function(event){
      let $evento = $('#evento1')
      let $boxregistro = $('#box-registro-1')

      if( $evento.hasClass('evento') ){
        $evento.removeClass('evento')
        $evento.addClass('evento-registro')
        $boxregistro.removeClass('hidden')
        let $costototal = $("#textocostototalevento1")
        auxCostoTotal = $costototal.text()
        let $costototalboletos = $('#costototalboletosevento1')
        $costototalboletos.text(auxCostoTotal)
      }
      else{
        $evento.removeClass('evento-registro')
        $evento.addClass('evento')
        $boxregistro.addClass('hidden')
      }
    })

    //subir y bajar numero de boletos
    function subirBoletos(thi){
      let $numeroBoletos = $('#numerodeboletosevento1')
      let $costototalboletos = $('#costototalboletosevento1')
      let $costototal = $("#textocostototalevento1")

      auxCostoTotal = $costototal.text()
      auxNumeroBoletos = $numeroBoletos.text()
      auxNumeroBoletos = Number(auxNumeroBoletos) + 1
      $numeroBoletos.text(auxNumeroBoletos)
      $costototalboletos.text( Number(auxCostoTotal) * auxNumeroBoletos )
    }
    
    function bajarBoletos(thi){
      let $numeroBoletos = $('#numerodeboletosevento1')
      let $costototalboletos = $('#costototalboletosevento1')
      let $costototal = $("#textocostototalevento1")
      
      auxCostoTotal = $costototal.text()
      auxNumeroBoletos = $numeroBoletos.text()
      if(Number(auxNumeroBoletos) > 1){
        auxNumeroBoletos = Number(auxNumeroBoletos) - 1
        $numeroBoletos.text(auxNumeroBoletos)
        $costototalboletos.text( Number(auxCostoTotal) * auxNumeroBoletos )
      }     
    }

    // Funcion de seleccion de servicios para un evento
    function seleccionDeServicios(thi) {
      id = thi.id

      let $servicio = $('#' + id)
      let $costototal = $("#textocostototalevento1")
      let $costototalboletos = $('#costototalboletosevento1')
      let $numeroboletos = $('#numerodeboletosevento1')
        

      auxCostoTotal = $costototal.text()
      auxCostoServicio = $servicio.data("costo")

      if( $servicio.hasClass('redondo-servicio-not-selected') ){
        $servicio.removeClass('redondo-servicio-not-selected')
        $servicio.addClass('redondo-servicio-selected')

        auxCostoTotal = Number(auxCostoTotal) + Number(auxCostoServicio)

        $costototal.text(auxCostoTotal)
        $costototalboletos.text( Number(auxCostoTotal) * Number($numeroboletos.text()))
      }
      else{
        $servicio.removeClass('redondo-servicio-selected')
        $servicio.addClass('redondo-servicio-not-selected')

        auxCostoTotal = Number(auxCostoTotal) - Number(auxCostoServicio)

        $costototal.text(auxCostoTotal)
        $costototalboletos.text( Number(auxCostoTotal) * Number($numeroboletos.text()))
      }
    }
    
    function abrirConfirmacionDeCompra(thi){
      id = thi.id

      let $btnAbrirPopup = $('#' + id)
      let $overlay = $('#overlay')
      let $popup = $('#popup')
      let $h4costototal = $('#h4-costo-total-popup')
      let $costototalevento = $('#costototalboletosevento1')

      $overlay.addClass('active')
      $popup.addClass('active')
      $h4costototal.text( "Costo Total: " +  $costototalevento.text() )

    }

    function confirmarCompra(thi){
      id = thi.id

      let $btnCerrarPopup = $('#btn-cerrar-popup')
      let $overlay = $('#overlay')
      let $popup = $('#popup')

      $overlay.removeClass('active')
      $popup.removeClass('active')     

    }

    </script>

</body>
</html>